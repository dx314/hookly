import{d as Me,a as i,f as m,c as se,s as n}from"../chunks/DwoeUTs1.js";import{p as Oe,u as Ve,s as f,a as Be,d as h,c as e,g as t,r,f as C,t as _,b as o,h as Ge}from"../chunks/Dye_Vu_V.js";import{i as p}from"../chunks/B4UtDhsa.js";import{s as Ce}from"../chunks/Da0CPe4u.js";import{s as Ue}from"../chunks/B-io2W3s.js";import{s as Ye,a as qe}from"../chunks/DOKCvP8A.js";import{p as ze}from"../chunks/BcCpa0YI.js";import{e as le,W as w}from"../chunks/i_25vcIR.js";var Ke=m('<div class="animate-pulse space-y-4"><div class="h-8 w-48 bg-[var(--color-muted)] rounded"></div> <div class="h-4 w-96 bg-[var(--color-muted)] rounded"></div></div>'),Qe=m('<div class="rounded-lg border border-[var(--color-destructive)] bg-[var(--color-destructive)]/10 p-4"><p class="text-[var(--color-destructive)]"> </p></div>'),Xe=m('<div class="flex gap-2"><button class="inline-flex items-center justify-center rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] hover:bg-[var(--color-primary)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"> </button></div>'),Ze=m('<div><dt class="text-[var(--color-muted-foreground)]">Last Attempt</dt> <dd class="mt-1"> </dd></div>'),er=m('<div><dt class="text-[var(--color-muted-foreground)]">Delivered</dt> <dd class="mt-1"> </dd></div>'),rr=m('<div class="md:col-span-2"><dt class="text-[var(--color-muted-foreground)]">Error Message</dt> <dd class="mt-1 text-[var(--color-destructive)]"> </dd></div>'),tr=m('<div class="px-6 pb-6"><pre class="bg-[var(--color-muted)] p-4 rounded-md overflow-x-auto text-sm font-mono"> </pre></div>'),ar=m('<div class="px-6 pb-6"><pre class="bg-[var(--color-muted)] p-4 rounded-md overflow-x-auto text-sm font-mono max-h-[500px] overflow-y-auto"> </pre></div>'),or=m('<div><a href="/webhooks" class="text-sm text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]">← Back to Webhooks</a> <div class="flex items-center gap-4 mt-2"><h1 class="text-2xl font-bold text-[var(--color-foreground)]">Webhook Details</h1> <span> </span></div> <p class="text-[var(--color-muted-foreground)] font-mono text-sm"> </p></div> <!> <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] p-6"><h2 class="text-lg font-semibold text-[var(--color-foreground)] mb-4">Information</h2> <dl class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div><dt class="text-[var(--color-muted-foreground)]">Endpoint</dt> <dd class="mt-1"><a class="hover:underline"> </a></dd></div> <div><dt class="text-[var(--color-muted-foreground)]">Received</dt> <dd class="mt-1"> </dd></div> <div><dt class="text-[var(--color-muted-foreground)]">Signature Valid</dt> <dd class="mt-1"> </dd></div> <div><dt class="text-[var(--color-muted-foreground)]">Delivery Attempts</dt> <dd class="mt-1"> </dd></div> <!> <!> <!></dl></div> <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] overflow-hidden"><button class="w-full px-6 py-4 flex items-center justify-between hover:bg-[var(--color-muted)]/50 transition-colors"><h2 class="text-lg font-semibold text-[var(--color-foreground)]">Headers</h2> <span class="text-[var(--color-muted-foreground)]"> </span></button> <!></div> <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] overflow-hidden"><button class="w-full px-6 py-4 flex items-center justify-between hover:bg-[var(--color-muted)]/50 transition-colors"><h2 class="text-lg font-semibold text-[var(--color-foreground)]">Payload</h2> <span class="text-[var(--color-muted-foreground)]"> </span></button> <!></div>',1),dr=m('<div class="space-y-6"><!></div>');function mr(ve,ne){Oe(ne,!0);const ie=()=>Ye(ze,"$page",ce),[ce,ue]=qe();let d=h(null),I=h(!0),y=h(null),k=h(!1),D=h(!1),E=h(!0);Ve(()=>{fe(ie().params.id)});async function fe(s){f(I,!0),f(y,null);try{const c=await le.getWebhook({id:s});f(d,c.webhook??null,!0)}catch(c){f(y,c instanceof Error?c.message:"Failed to fetch webhook",!0)}finally{f(I,!1)}}function me(s){switch(s){case w.PENDING:return{class:"badge-pending",label:"Pending"};case w.DELIVERED:return{class:"badge-delivered",label:"Delivered"};case w.FAILED:return{class:"badge-failed",label:"Failed"};case w.DEAD_LETTER:return{class:"badge-dead-letter",label:"Dead Letter"};default:return{class:"",label:"Unknown"}}}function S(s){return s?.seconds?new Date(Number(s.seconds)*1e3).toLocaleString():"N/A"}function pe(s){try{const c=new TextDecoder().decode(s),P=JSON.parse(c);return JSON.stringify(P,null,2)}catch{return new TextDecoder().decode(s)}}function _e(s){return JSON.stringify(s,null,2)}async function ge(){if(t(d)){f(k,!0);try{const s=await le.replayWebhook({id:t(d).id});f(d,s.webhook??null,!0)}catch(s){f(y,s instanceof Error?s.message:"Failed to replay webhook",!0)}finally{f(k,!1)}}}var L=dr(),be=e(L);{var xe=s=>{var c=Ke();i(s,c)},he=s=>{var c=se(),P=C(c);{var ye=b=>{var x=Qe(),A=e(x),R=e(A,!0);r(A),r(x),_(()=>n(R,t(y))),i(b,x)},we=b=>{var x=se(),A=C(x);{var R=j=>{const U=Ge(()=>me(t(d).status));var Y=or(),F=C(Y),T=o(e(F),2),$=o(e(T),2),ke=e($,!0);r($),r(T);var q=o(T,2),De=e(q,!0);r(q),r(F);var z=o(F,2);{var Ee=a=>{var l=Xe(),v=e(l);v.__click=ge;var u=e(v,!0);r(v),r(l),_(()=>{v.disabled=t(k),n(u,t(k)?"Replaying...":"Replay Webhook")}),i(a,l)};p(z,a=>{t(d).status!==w.PENDING&&a(Ee)})}var H=o(z,2),K=o(e(H),2),J=e(K),Q=o(e(J),2),M=e(Q),Ae=e(M,!0);r(M),r(Q),r(J);var O=o(J,2),X=o(e(O),2),Ne=e(X,!0);r(X),r(O);var V=o(O,2),Z=o(e(V),2),We=e(Z,!0);r(Z),r(V);var B=o(V,2),ee=o(e(B),2),Ie=e(ee,!0);r(ee),r(B);var re=o(B,2);{var Se=a=>{var l=Ze(),v=o(e(l),2),u=e(v,!0);r(v),r(l),_(g=>n(u,g),[()=>S(t(d).lastAttemptAt)]),i(a,l)};p(re,a=>{t(d).lastAttemptAt&&a(Se)})}var te=o(re,2);{var Le=a=>{var l=er(),v=o(e(l),2),u=e(v,!0);r(v),r(l),_(g=>n(u,g),[()=>S(t(d).deliveredAt)]),i(a,l)};p(te,a=>{t(d).deliveredAt&&a(Le)})}var Pe=o(te,2);{var Re=a=>{var l=rr(),v=o(e(l),2),u=e(v,!0);r(v),r(l),_(()=>n(u,t(d).errorMessage)),i(a,l)};p(Pe,a=>{t(d).errorMessage&&a(Re)})}r(K),r(H);var G=o(H,2),N=e(G);N.__click=()=>f(D,!t(D));var ae=o(e(N),2),je=e(ae,!0);r(ae),r(N);var Fe=o(N,2);{var Te=a=>{var l=tr(),v=e(l),u=e(v,!0);r(v),r(l),_(g=>n(u,g),[()=>_e(t(d).headers)]),i(a,l)};p(Fe,a=>{t(D)&&t(d).headers&&a(Te)})}r(G);var oe=o(G,2),W=e(oe);W.__click=()=>f(E,!t(E));var de=o(e(W),2),$e=e(de,!0);r(de),r(W);var He=o(W,2);{var Je=a=>{var l=ar(),v=e(l),u=e(v,!0);r(v),r(l),_(g=>n(u,g),[()=>pe(t(d).payload)]),i(a,l)};p(He,a=>{t(E)&&t(d).payload&&a(Je)})}r(oe),_(a=>{Ue($,1,`${t(U).class??""} inline-flex items-center rounded-full px-2 py-1 text-xs font-medium`),n(ke,t(U).label),n(De,t(d).id),Ce(M,"href",`/endpoints/${t(d).endpointId??""}`),n(Ae,t(d).endpointId),n(Ne,a),n(We,t(d).signatureValid?"✓ Yes":"✗ No"),n(Ie,t(d).attempts),n(je,t(D)?"−":"+"),n($e,t(E)?"−":"+")},[()=>S(t(d).receivedAt)]),i(j,Y)};p(A,j=>{t(d)&&j(R)},!0)}i(b,x)};p(P,b=>{t(y)?b(ye):b(we,!1)},!0)}i(s,c)};p(be,s=>{t(I)?s(xe):s(he,!1)})}r(L),i(ve,L),Be(),ue()}Me(["click"]);export{mr as component};
