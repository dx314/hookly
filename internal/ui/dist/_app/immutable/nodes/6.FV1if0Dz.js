import{e as W,a as T,f as P,s as C}from"../chunks/DwoeUTs1.js";import{p as $,d,e as z,t as G,g as e,a as J,b as l,c as a,r as t,n as v,s as n}from"../chunks/Dye_Vu_V.js";import{i as K}from"../chunks/B4UtDhsa.js";import{e as Q,i as V}from"../chunks/oAOXQWqr.js";import{r as U}from"../chunks/Da0CPe4u.js";import{b as R}from"../chunks/0M8ZYYMS.js";import{b as X}from"../chunks/BNJAlfjC.js";import{g as Y}from"../chunks/MlefPtY7.js";import{P as i,e as Z}from"../chunks/i_25vcIR.js";var rr=P('<div class="rounded-lg border border-[var(--color-destructive)] bg-[var(--color-destructive)]/10 p-4"><p class="text-[var(--color-destructive)]"> </p></div>'),er=P("<option> </option>"),or=P(`<div class="max-w-2xl space-y-6"><div><a href="/endpoints" class="text-sm text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]">‚Üê Back to Endpoints</a> <h1 class="text-2xl font-bold text-[var(--color-foreground)] mt-2">Create Endpoint</h1> <p class="text-[var(--color-muted-foreground)]">Set up a new webhook endpoint</p></div> <!> <form class="space-y-4"><div class="space-y-2"><label for="name" class="text-sm font-medium text-[var(--color-foreground)]">Name</label> <input id="name" type="text" required placeholder="My Stripe Webhooks" class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-background)] text-[var(--color-foreground)] placeholder:text-[var(--color-muted-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--color-ring)]"/></div> <div class="space-y-2"><label for="provider" class="text-sm font-medium text-[var(--color-foreground)]">Provider</label> <select id="provider" class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-background)] text-[var(--color-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--color-ring)]"></select> <p class="text-xs text-[var(--color-muted-foreground)]">Provider determines how webhook signatures are verified</p></div> <div class="space-y-2"><label for="signatureSecret" class="text-sm font-medium text-[var(--color-foreground)]">Signature Secret <span class="text-[var(--color-muted-foreground)] font-normal">(optional)</span></label> <input id="signatureSecret" type="password" placeholder="whsec_..." class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-background)] text-[var(--color-foreground)] placeholder:text-[var(--color-muted-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--color-ring)] font-mono"/> <p class="text-xs text-[var(--color-muted-foreground)]">Secret used to verify webhook signatures. Get this from your provider's dashboard.</p></div> <div class="space-y-2"><label for="destinationUrl" class="text-sm font-medium text-[var(--color-foreground)]">Destination URL</label> <input id="destinationUrl" type="url" required placeholder="http://localhost:3000/webhooks/stripe" class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-background)] text-[var(--color-foreground)] placeholder:text-[var(--color-muted-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--color-ring)] font-mono"/> <p class="text-xs text-[var(--color-muted-foreground)]">The URL on your private network where webhooks will be forwarded</p></div> <div class="flex gap-4 pt-4"><button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] hover:bg-[var(--color-primary)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"> </button> <a href="/endpoints" class="inline-flex items-center justify-center rounded-md border border-[var(--color-border)] px-4 py-2 text-sm font-medium text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors">Cancel</a></div></form></div>`);function vr(D,H){$(H,!0);let p=d(""),f=d(z(i.GENERIC)),m=d(""),b=d(""),c=d(!1),u=d(null);const M=[{value:i.STRIPE,label:"Stripe"},{value:i.GITHUB,label:"GitHub"},{value:i.TELEGRAM,label:"Telegram"},{value:i.GENERIC,label:"Generic / Other"}];async function O(r){r.preventDefault(),n(c,!0),n(u,null);try{const o=await Z.createEndpoint({name:e(p),providerType:e(f),signatureSecret:e(m),destinationUrl:e(b)});Y(`/endpoints/${o.endpoint?.id}`)}catch(o){n(u,o instanceof Error?o.message:"Failed to create endpoint",!0)}finally{n(c,!1)}}var g=or(),I=l(a(g),2);{var A=r=>{var o=rr(),s=a(o),S=a(s,!0);t(s),t(o),G(()=>C(S,e(u))),T(r,o)};K(I,r=>{e(u)&&r(A)})}var x=l(I,2),h=a(x),L=l(a(h),2);U(L),t(h);var y=l(h,2),_=l(a(y),2);Q(_,21,()=>M,V,(r,o)=>{var s=er(),S=a(s,!0);t(s);var B={};G(()=>{C(S,e(o).label),B!==(B=e(o).value)&&(s.value=(s.__value=e(o).value)??"")}),T(r,s)}),t(_),v(2),t(y);var w=l(y,2),N=l(a(w),2);U(N),v(2),t(w);var k=l(w,2),j=l(a(k),2);U(j),v(2),t(k);var q=l(k,2),E=a(q),F=a(E,!0);t(E),v(2),t(q),t(x),t(g),G(()=>{E.disabled=e(c),C(F,e(c)?"Creating...":"Create Endpoint")}),W("submit",x,O),R(L,()=>e(p),r=>n(p,r)),X(_,()=>e(f),r=>n(f,r)),R(N,()=>e(m),r=>n(m,r)),R(j,()=>e(b),r=>n(b,r)),T(D,g),J()}export{vr as component};
