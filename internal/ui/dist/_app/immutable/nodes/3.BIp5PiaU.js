import{d as br,a as s,f as c,c as K,s as f}from"../chunks/DwoeUTs1.js";import{p as yr,d as y,e as hr,o as _r,a as wr,s as n,b as l,c as t,g as o,r as e,f as O,t as Q}from"../chunks/Dye_Vu_V.js";import{i as h}from"../chunks/B4UtDhsa.js";import{e as Er,i as kr}from"../chunks/oAOXQWqr.js";import{s as V}from"../chunks/Da0CPe4u.js";import{e as S,P as _}from"../chunks/i_25vcIR.js";var Tr=c('<div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)]"><div class="p-8 text-center text-[var(--color-muted-foreground)]">Loading...</div></div>'),Mr=c('<div class="rounded-lg border border-[var(--color-destructive)] bg-[var(--color-destructive)]/10 p-4"><p class="text-[var(--color-destructive)]"> </p></div>'),Ar=c('<div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] p-8 text-center"><p class="text-[var(--color-muted-foreground)]">No endpoints yet.</p> <a href="/endpoints/new" class="inline-flex items-center justify-center rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] hover:bg-[var(--color-primary)]/90 transition-colors mt-4">Create your first endpoint</a></div>'),Cr=c('<span class="inline-flex items-center rounded-full px-2 py-1 text-xs font-medium bg-[var(--color-muted)] text-[var(--color-muted-foreground)]">Muted</span>'),Gr=c('<span class="inline-flex items-center rounded-full px-2 py-1 text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400">Active</span>'),Pr=c('<tr class="hover:bg-[var(--color-muted)]/50"><td class="px-4 py-3"><a class="text-sm font-medium text-[var(--color-foreground)] hover:underline"> </a></td><td class="px-4 py-3"><span class="text-sm text-[var(--color-muted-foreground)]"> </span></td><td class="px-4 py-3"><div class="flex items-center gap-2"><code class="text-xs bg-[var(--color-muted)] px-2 py-1 rounded font-mono truncate max-w-[200px]"> </code> <button class="text-xs text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] transition-colors"> </button></div></td><td class="px-4 py-3"><!></td><td class="px-4 py-3 text-right"><div class="flex items-center justify-end gap-2"><button class="text-xs px-2 py-1 rounded border border-[var(--color-border)] text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:border-[var(--color-foreground)] transition-colors"> </button> <a class="text-xs px-2 py-1 rounded border border-[var(--color-border)] text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] hover:border-[var(--color-foreground)] transition-colors">Edit</a> <button class="text-xs px-2 py-1 rounded border border-[var(--color-destructive)] text-[var(--color-destructive)] hover:bg-[var(--color-destructive)] hover:text-white transition-colors">Delete</button></div></td></tr>'),Ur=c('<div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] overflow-hidden"><table class="w-full"><thead class="bg-[var(--color-muted)]"><tr><th class="text-left px-4 py-3 text-sm font-medium text-[var(--color-muted-foreground)]">Name</th><th class="text-left px-4 py-3 text-sm font-medium text-[var(--color-muted-foreground)]">Provider</th><th class="text-left px-4 py-3 text-sm font-medium text-[var(--color-muted-foreground)]">Webhook URL</th><th class="text-left px-4 py-3 text-sm font-medium text-[var(--color-muted-foreground)]">Status</th><th class="text-right px-4 py-3 text-sm font-medium text-[var(--color-muted-foreground)]">Actions</th></tr></thead><tbody class="divide-y divide-[var(--color-border)]"></tbody></table></div>'),jr=c('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-[var(--color-foreground)]">Endpoints</h1> <p class="text-[var(--color-muted-foreground)]">Manage your webhook endpoints</p></div> <a href="/endpoints/new" class="inline-flex items-center justify-center rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] hover:bg-[var(--color-primary)]/90 transition-colors">Create Endpoint</a></div> <!></div>');function Hr(X,Y){yr(Y,!0);let w=y(hr([])),E=y(!0),v=y(null),k=y(null);_r(async()=>{await T()});async function T(){n(E,!0),n(v,null);try{const r=await S.listEndpoints({});n(w,r.endpoints,!0)}catch(r){n(v,r instanceof Error?r.message:"Failed to fetch endpoints",!0)}finally{n(E,!1)}}function Z(r){switch(r){case _.STRIPE:return"Stripe";case _.GITHUB:return"GitHub";case _.TELEGRAM:return"Telegram";case _.GENERIC:return"Generic";default:return"Unknown"}}async function $(r,a){try{await navigator.clipboard.writeText(a),n(k,r,!0),setTimeout(()=>{n(k,null)},2e3)}catch(A){console.error("Failed to copy:",A)}}async function rr(r){try{await S.updateEndpoint({id:r.id,muted:!r.muted}),await T()}catch(a){n(v,a instanceof Error?a.message:"Failed to update endpoint",!0)}}async function er(r){if(confirm("Are you sure you want to delete this endpoint? All associated webhooks will also be deleted."))try{await S.deleteEndpoint({id:r}),await T()}catch(a){n(v,a instanceof Error?a.message:"Failed to delete endpoint",!0)}}var M=jr(),tr=l(t(M),2);{var or=r=>{var a=Tr();s(r,a)},ar=r=>{var a=K(),A=O(a);{var dr=u=>{var p=Mr(),g=t(p),C=t(g,!0);e(g),e(p),Q(()=>f(C,o(v))),s(u,p)},sr=u=>{var p=K(),g=O(p);{var C=m=>{var x=Ar();s(m,x)},nr=m=>{var x=Ur(),H=t(x),W=l(t(H));Er(W,21,()=>o(w),kr,(lr,d)=>{var G=Pr(),P=t(G),U=t(P),ir=t(U,!0);e(U),e(P);var j=l(P),B=t(j),cr=t(B,!0);e(B),e(j);var F=l(j),D=t(F),I=t(D),vr=t(I);e(I);var L=l(I,2);L.__click=()=>$(o(d).id,`/h/${o(d).id}`);var ur=t(L,!0);e(L),e(D),e(F);var R=l(F),pr=t(R);{var mr=i=>{var N=Cr();s(i,N)},fr=i=>{var N=Gr();s(i,N)};h(pr,i=>{o(d).muted?i(mr):i(fr,!1)})}e(R);var q=l(R),z=t(q),b=t(z);b.__click=()=>rr(o(d));var xr=t(b,!0);e(b);var J=l(b,2),gr=l(J,2);gr.__click=()=>er(o(d).id),e(z),e(q),e(G),Q(i=>{V(U,"href",`/endpoints/${o(d).id??""}`),f(ir,o(d).name),f(cr,i),f(vr,`/h/${o(d).id??""}`),f(ur,o(k)===o(d).id?"âœ“":"Copy"),f(xr,o(d).muted?"Unmute":"Mute"),V(J,"href",`/endpoints/${o(d).id??""}/edit`)},[()=>Z(o(d).providerType)]),s(lr,G)}),e(W),e(H),e(x),s(m,x)};h(g,m=>{o(w).length===0?m(C):m(nr,!1)},!0)}s(u,p)};h(A,u=>{o(v)?u(dr):u(sr,!1)},!0)}s(r,a)};h(tr,r=>{o(E)?r(or):r(ar,!1)})}e(M),s(X,M),wr()}br(["click"]);export{Hr as component};
