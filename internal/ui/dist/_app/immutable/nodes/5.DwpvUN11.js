import{a as c,f as b,c as W,s as h,e as br}from"../chunks/DwoeUTs1.js";import{p as xr,u as _r,s as o,g as r,a as yr,d as v,c as t,r as a,f as q,t as B,b as d,n as hr}from"../chunks/Dye_Vu_V.js";import{i as w}from"../chunks/B4UtDhsa.js";import{r as E,s as X,a as wr}from"../chunks/Da0CPe4u.js";import{b as D}from"../chunks/0M8ZYYMS.js";import{s as Er,a as Sr}from"../chunks/DOKCvP8A.js";import{p as kr}from"../chunks/BcCpa0YI.js";import{g as Ur}from"../chunks/MlefPtY7.js";import{e as Y,P as S}from"../chunks/i_25vcIR.js";var Tr=b('<div class="animate-pulse space-y-4"><div class="h-8 w-48 bg-[var(--color-muted)] rounded"></div> <div class="h-4 w-96 bg-[var(--color-muted)] rounded"></div></div>'),Pr=b('<div class="rounded-lg border border-[var(--color-destructive)] bg-[var(--color-destructive)]/10 p-4"><p class="text-[var(--color-destructive)]"> </p></div>'),$r=b('<div class="rounded-lg border border-[var(--color-destructive)] bg-[var(--color-destructive)]/10 p-4"><p class="text-[var(--color-destructive)]"> </p></div>'),Gr=b('<div><a class="text-sm text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]">‚Üê Back to Endpoint</a> <h1 class="text-2xl font-bold text-[var(--color-foreground)] mt-2">Edit Endpoint</h1> <p class="text-[var(--color-muted-foreground)]"> </p></div> <!> <form class="space-y-4"><div class="space-y-2"><label for="name" class="text-sm font-medium text-[var(--color-foreground)]">Name</label> <input id="name" type="text" required class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-background)] text-[var(--color-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--color-ring)]"/></div> <div class="space-y-2"><label for="provider" class="text-sm font-medium text-[var(--color-foreground)]">Provider</label> <input id="provider" type="text" disabled class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-muted)] text-[var(--color-muted-foreground)] cursor-not-allowed"/> <p class="text-xs text-[var(--color-muted-foreground)]">Provider cannot be changed after creation</p></div> <div class="space-y-2"><label for="signatureSecret" class="text-sm font-medium text-[var(--color-foreground)]">Signature Secret <span class="text-[var(--color-muted-foreground)] font-normal">(leave blank to keep existing)</span></label> <input id="signatureSecret" type="password" placeholder="Enter new secret to change" class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-background)] text-[var(--color-foreground)] placeholder:text-[var(--color-muted-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--color-ring)] font-mono"/></div> <div class="space-y-2"><label for="destinationUrl" class="text-sm font-medium text-[var(--color-foreground)]">Destination URL</label> <input id="destinationUrl" type="url" required class="w-full px-3 py-2 rounded-md border border-[var(--color-border)] bg-[var(--color-background)] text-[var(--color-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--color-ring)] font-mono"/></div> <div class="flex gap-4 pt-4"><button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] hover:bg-[var(--color-primary)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"> </button> <a class="inline-flex items-center justify-center rounded-md border border-[var(--color-border)] px-4 py-2 text-sm font-medium text-[var(--color-foreground)] hover:bg-[var(--color-muted)] transition-colors">Cancel</a></div></form>',1),Cr=b('<div class="max-w-2xl space-y-6"><!></div>');function Nr(Z,rr){xr(rr,!0);const er=()=>Er(kr,"$page",or),[or,tr]=Sr();let e=v(null),f=v(""),k=v(""),m=v(""),U=v(!0),x=v(!1),l=v(null);_r(()=>{ar(er().params.id)});async function ar(n){o(U,!0),o(l,null);try{const s=await Y.getEndpoint({id:n});o(e,s.endpoint??null,!0),r(e)&&(o(f,r(e).name,!0),o(m,r(e).destinationUrl,!0))}catch(s){o(l,s instanceof Error?s.message:"Failed to fetch endpoint",!0)}finally{o(U,!1)}}function F(n){switch(n){case S.STRIPE:return"Stripe";case S.GITHUB:return"GitHub";case S.TELEGRAM:return"Telegram";case S.GENERIC:return"Generic";default:return"Unknown"}}async function nr(n){if(n.preventDefault(),!!r(e)){o(x,!0),o(l,null);try{await Y.updateEndpoint({id:r(e).id,name:r(f)!==r(e).name?r(f):void 0,destinationUrl:r(m)!==r(e).destinationUrl?r(m):void 0,signatureSecret:r(k)||void 0}),Ur(`/endpoints/${r(e).id}`)}catch(s){o(l,s instanceof Error?s.message:"Failed to update endpoint",!0)}finally{o(x,!1)}}}var T=Cr(),sr=t(T);{var dr=n=>{var s=Tr();c(n,s)},ir=n=>{var s=W(),lr=q(s);{var cr=u=>{var p=Pr(),_=t(p),P=t(_,!0);a(_),a(p),B(()=>h(P,r(l))),c(u,p)},vr=u=>{var p=W(),_=q(p);{var P=$=>{var H=Gr(),G=q(H),N=t(G),A=d(N,4),ur=t(A);a(A),a(G);var M=d(G,2);{var pr=i=>{var g=$r(),V=t(g),gr=t(V,!0);a(V),a(g),B(()=>h(gr,r(l))),c(i,g)};w(M,i=>{r(l)&&i(pr)})}var C=d(M,2),R=t(C),z=d(t(R),2);E(z),a(R);var I=d(R,2),J=d(t(I),2);E(J),hr(2),a(I);var L=d(I,2),K=d(t(L),2);E(K),a(L);var j=d(L,2),O=d(t(j),2);E(O),a(j);var Q=d(j,2),y=t(Q),fr=t(y,!0);a(y);var mr=d(y,2);a(Q),a(C),B((i,g)=>{X(N,"href",`/endpoints/${r(e).id??""}`),h(ur,`${i??""} webhook endpoint`),wr(J,g),y.disabled=r(x),h(fr,r(x)?"Saving...":"Save Changes"),X(mr,"href",`/endpoints/${r(e).id??""}`)},[()=>F(r(e).providerType),()=>F(r(e).providerType)]),br("submit",C,nr),D(z,()=>r(f),i=>o(f,i)),D(K,()=>r(k),i=>o(k,i)),D(O,()=>r(m),i=>o(m,i)),c($,H)};w(_,$=>{r(e)&&$(P)},!0)}c(u,p)};w(lr,u=>{r(l)&&!r(e)?u(cr):u(vr,!1)},!0)}c(n,s)};w(sr,n=>{r(U)?n(dr):n(ir,!1)})}a(T),c(Z,T),yr(),tr()}export{Nr as component};
