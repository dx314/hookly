import{d as ze,a as n,f as u,c as ce,s as l}from"../chunks/DwoeUTs1.js";import{p as qe,d as f,e as Je,u as Ke,s as v,a as Oe,c as r,g as t,r as e,f as q,t as J,b as a,h as Qe}from"../chunks/Dye_Vu_V.js";import{i as x}from"../chunks/B4UtDhsa.js";import{e as Xe,i as Ye}from"../chunks/oAOXQWqr.js";import{s as K}from"../chunks/Da0CPe4u.js";import{s as Ze}from"../chunks/B-io2W3s.js";import{s as er,a as rr}from"../chunks/DOKCvP8A.js";import{p as tr}from"../chunks/BcCpa0YI.js";import{e as O,P as y,W as w}from"../chunks/i_25vcIR.js";var or=u('<div class="animate-pulse space-y-4"><div class="h-8 w-48 bg-[var(--color-muted)] rounded"></div> <div class="h-4 w-96 bg-[var(--color-muted)] rounded"></div></div>'),ar=u('<div class="rounded-lg border border-[var(--color-destructive)] bg-[var(--color-destructive)]/10 p-4"><p class="text-[var(--color-destructive)]"> </p></div>'),dr=u('<span class="inline-flex items-center rounded-full px-2 py-1 text-xs font-medium bg-[var(--color-muted)] text-[var(--color-muted-foreground)]">Muted</span>'),sr=u('<div class="p-8 text-center text-[var(--color-muted-foreground)]">No webhooks received yet</div>'),lr=u('<tr class="hover:bg-[var(--color-muted)]/50"><td class="px-4 py-2"><a class="text-sm hover:underline"> </a></td><td class="px-4 py-2"><span> </span></td><td class="px-4 py-2 text-sm text-[var(--color-muted-foreground)]"> </td></tr>'),ir=u('<table class="w-full"><thead class="bg-[var(--color-muted)]"><tr><th class="text-left px-4 py-2 text-xs font-medium text-[var(--color-muted-foreground)]">Received</th><th class="text-left px-4 py-2 text-xs font-medium text-[var(--color-muted-foreground)]">Status</th><th class="text-left px-4 py-2 text-xs font-medium text-[var(--color-muted-foreground)]">Attempts</th></tr></thead><tbody class="divide-y divide-[var(--color-border)]"></tbody></table>'),nr=u(`<div><a href="/endpoints" class="text-sm text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]">← Back to Endpoints</a> <div class="flex items-center gap-4 mt-2"><h1 class="text-2xl font-bold text-[var(--color-foreground)]"> </h1> <!></div> <p class="text-[var(--color-muted-foreground)]"> </p></div> <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] p-6"><h2 class="text-lg font-semibold text-[var(--color-foreground)] mb-2">Webhook URL</h2> <p class="text-sm text-[var(--color-muted-foreground)] mb-4">Configure this URL in your provider's webhook settings</p> <div class="flex items-center gap-2"><code class="flex-1 bg-[var(--color-muted)] px-4 py-2 rounded-md font-mono text-sm overflow-x-auto"> </code> <button class="px-4 py-2 rounded-md border border-[var(--color-border)] text-sm font-medium hover:bg-[var(--color-muted)] transition-colors"> </button></div></div> <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] p-6"><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-[var(--color-foreground)]">Details</h2> <div class="flex gap-2"><button class="px-3 py-1 rounded border border-[var(--color-border)] text-sm hover:bg-[var(--color-muted)] transition-colors"> </button> <a class="px-3 py-1 rounded border border-[var(--color-border)] text-sm hover:bg-[var(--color-muted)] transition-colors">Edit</a></div></div> <dl class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div><dt class="text-[var(--color-muted-foreground)]">Destination URL</dt> <dd class="font-mono mt-1"> </dd></div> <div><dt class="text-[var(--color-muted-foreground)]">Created</dt> <dd class="mt-1"> </dd></div></dl></div> <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-background)] overflow-hidden"><div class="px-6 py-4 border-b border-[var(--color-border)]"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-[var(--color-foreground)]">Recent Webhooks</h2> <a class="text-sm text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)]">View all →</a></div></div> <!></div>`,1),vr=u('<div class="space-y-6"><!></div>');function hr(ue,pe){qe(pe,!0);const me=()=>er(tr,"$page",fe),[fe,be]=rr();let d=f(null),k=f(""),E=f(Je([])),D=f(!0),b=f(null),R=f(!1);Ke(()=>{Q(me().params.id)});async function Q(o){v(D,!0),v(b,null);try{const[i,L]=await Promise.all([O.getEndpoint({id:o}),O.listWebhooks({endpointId:o,pagination:{pageSize:10}})]);v(d,i.endpoint??null,!0),v(k,i.webhookUrl,!0),v(E,L.webhooks,!0)}catch(i){v(b,i instanceof Error?i.message:"Failed to fetch endpoint",!0)}finally{v(D,!1)}}function xe(o){switch(o){case y.STRIPE:return"Stripe";case y.GITHUB:return"GitHub";case y.TELEGRAM:return"Telegram";case y.GENERIC:return"Generic";default:return"Unknown"}}function ge(o){switch(o){case w.PENDING:return{class:"badge-pending",label:"Pending"};case w.DELIVERED:return{class:"badge-delivered",label:"Delivered"};case w.FAILED:return{class:"badge-failed",label:"Failed"};case w.DEAD_LETTER:return{class:"badge-dead-letter",label:"Dead Letter"};default:return{class:"",label:"Unknown"}}}function X(o){return o?.seconds?new Date(Number(o.seconds)*1e3).toLocaleString():"N/A"}async function _e(){try{await navigator.clipboard.writeText(t(k)),v(R,!0),setTimeout(()=>v(R,!1),2e3)}catch(o){console.error("Failed to copy:",o)}}async function he(){if(t(d))try{await O.updateEndpoint({id:t(d).id,muted:!t(d).muted}),await Q(t(d).id)}catch(o){v(b,o instanceof Error?o.message:"Failed to update endpoint",!0)}}var U=vr(),ye=r(U);{var we=o=>{var i=or();n(o,i)},ke=o=>{var i=ce(),L=q(i);{var Ee=p=>{var m=ar(),g=r(m),T=r(g,!0);e(g),e(m),J(()=>l(T,t(b))),n(p,m)},De=p=>{var m=ce(),g=q(m);{var T=A=>{var Y=nr(),I=q(Y),P=a(r(I),2),S=r(P),Re=r(S,!0);e(S);var Ue=a(S,2);{var Le=s=>{var c=dr();n(s,c)};x(Ue,s=>{t(d).muted&&s(Le)})}e(P);var Z=a(P,2),Te=r(Z);e(Z),e(I);var C=a(I,2),ee=a(r(C),4),G=r(ee),Ae=r(G,!0);e(G);var N=a(G,2);N.__click=_e;var Ie=r(N,!0);e(N),e(ee),e(C);var W=a(C,2),F=r(W),re=a(r(F),2),_=r(re);_.__click=he;var Pe=r(_,!0);e(_);var Se=a(_,2);e(re),e(F);var te=a(F,2),$=r(te),oe=a(r($),2),Ce=r(oe,!0);e(oe),e($);var ae=a($,2),de=a(r(ae),2),Ge=r(de,!0);e(de),e(ae),e(te),e(W);var se=a(W,2),M=r(se),le=r(M),Ne=a(r(le),2);e(le),e(M);var We=a(M,2);{var Fe=s=>{var c=sr();n(s,c)},$e=s=>{var c=ir(),ie=a(r(c));Xe(ie,21,()=>t(E),Ye,(Me,h)=>{const ne=Qe(()=>ge(t(h).status));var B=lr(),j=r(B),H=r(j),Be=r(H,!0);e(H),e(j);var V=a(j),z=r(V),je=r(z,!0);e(z),e(V);var ve=a(V),He=r(ve,!0);e(ve),e(B),J(Ve=>{K(H,"href",`/webhooks/${t(h).id??""}`),l(Be,Ve),Ze(z,1,`${t(ne).class??""} inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium`),l(je,t(ne).label),l(He,t(h).attempts)},[()=>X(t(h).receivedAt)]),n(Me,B)}),e(ie),e(c),n(s,c)};x(We,s=>{t(E).length===0?s(Fe):s($e,!1)})}e(se),J((s,c)=>{l(Re,t(d).name),l(Te,`${s??""} webhook endpoint`),l(Ae,t(k)),l(Ie,t(R)?"Copied!":"Copy"),l(Pe,t(d).muted?"Unmute":"Mute"),K(Se,"href",`/endpoints/${t(d).id??""}/edit`),l(Ce,t(d).destinationUrl),l(Ge,c),K(Ne,"href",`/webhooks?endpoint=${t(d).id??""}`)},[()=>xe(t(d).providerType),()=>X(t(d).createdAt)]),n(A,Y)};x(g,A=>{t(d)&&A(T)},!0)}n(p,m)};x(L,p=>{t(b)?p(Ee):p(De,!1)},!0)}n(o,i)};x(ye,o=>{t(D)?o(we):o(ke,!1)})}e(U),n(ue,U),Oe(),be()}ze(["click"]);export{hr as component};
